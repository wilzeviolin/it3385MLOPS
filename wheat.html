<!DOCTYPE html>
<html>
<head>
    <title>Wheat Seed Classification</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input { width: 100%; padding: 8px; box-sizing: border-box; }
        button { padding: 10px 15px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        .result { margin-top: 20px; padding: 15px; border: 1px solid #ddd; background-color: #f9f9f9; }
        
        /* Loading spinner styles */
        .loading {
            display: none;
            margin: 15px 0;
            text-align: center;
        }
        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: #4CAF50;
            animation: spin 1s ease-in-out infinite;
        }
        .loading-text {
            margin-top: 10px;
            font-weight: bold;
        }
        
        /* Success animation */
        .success-animation {
            background-color: #DFF2BF;
            color: #4F8A10;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            animation: fadeOut 3s forwards;
            display: none;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; }
        }
        
        /* Disabled button style */
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Wheat Seed Classification</h1>
        
        <div id="error-message" style="color: red; display: none;"></div>
        <div id="success-message" class="success-animation"></div>
        
        <form id="wheat-form">
            <div class="form-group">
                <label for="area">Area (10.59-21.18):</label>
                <input type="number" step="0.01" id="area" name="area" required min="10.59" max="21.18">
            </div>
            
            <div class="form-group">
                <label for="perimeter">Perimeter (12.41-17.25):</label>
                <input type="number" step="0.01" id="perimeter" name="perimeter" required min="12.41" max="17.25">
            </div>
            
            <div class="form-group">
                <label for="compactness">Compactness (0.8081-0.9183):</label>
                <input type="number" step="0.0001" id="compactness" name="compactness" required min="0.8081" max="0.9183">
            </div>
            
            <div class="form-group">
                <label for="length">Length (4.899-6.675):</label>
                <input type="number" step="0.001" id="length" name="length" required min="4.899" max="6.675">
            </div>
            
            <div class="form-group">
                <label for="width">Width (2.63-4.033):</label>
                <input type="number" step="0.001" id="width" name="width" required min="2.63" max="4.033">
            </div>
            
            <div class="form-group">
                <label for="asymmetry_coeff">Asymmetry Coefficient (0.7651-8.315):</label>
                <input type="number" step="0.0001" id="asymmetry_coeff" name="asymmetry_coeff" required min="0.7651" max="8.315">
            </div>
            
            <div class="form-group">
                <label for="groove">Groove (4.519-6.55):</label>
                <input type="number" step="0.001" id="groove" name="groove" required min="4.519" max="6.55">
            </div>
            
            <button type="submit" id="predict-button">Predict Wheat Type</button>
        </form>
        
        <!-- Loading indicator -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <div class="loading-text">Analyzing wheat seed data...</div>
        </div>
        
        <div id="result" class="result" style="display: none;">
            <h2>Prediction Result</h2>
            <p>The predicted wheat type is: <span id="prediction-value"></span></p>
            <p>Wheat Types:</p>
            <ul>

                <li>1: Kama : Kama wheat is typically grown in temperate climates and is known for its high protein content and excellent baking quality. It is commonly used in making bread and other baked goods.</li>

                <li>2: Rosa : Rosa wheat is characterized by its lighter color and high yield. It is often used for making pastries and cakes due to its delicate texture.</li>

                <li>3: Canadian : Canadian wheat is widely recognized for its strong gluten content, making it ideal for bread and pasta production. It is highly valued for its versatility and high milling yield.</li>

            </ul>
        </div>
    </div>

    <script>
        let previousPrediction = null;
        
        document.getElementById('wheat-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            
            // Show loading indicator and disable button
            const loadingElement = document.getElementById('loading');
            const predictButton = document.getElementById('predict-button');
            const resultElement = document.getElementById('result');
            
            loadingElement.style.display = 'block';
            predictButton.disabled = true;
            
            // Send AJAX request to server
            fetch('/process', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Hide loading indicator
                loadingElement.style.display = 'none';
                predictButton.disabled = false;
                
                if (data.error) {
                    // Show error
                    document.getElementById('error-message').textContent = data.error;
                    document.getElementById('error-message').style.display = 'block';
                    resultElement.style.display = 'none';
                } else {
                    // Show prediction
                    const predictionValue = document.getElementById('prediction-value');
                    predictionValue.textContent = data.prediction;
                    
                    // Check if this is a new prediction
                    if (previousPrediction !== null && previousPrediction !== data.prediction) {
                        // Show success animation for new prediction
                        const successMessage = document.getElementById('success-message');
                        successMessage.textContent = 'New prediction calculated!';
                        successMessage.style.display = 'block';
                        
                        // Hide success message after animation completes
                        setTimeout(() => {
                            successMessage.style.display = 'none';
                        }, 3000);
                        
                        // Highlight the prediction value by briefly changing its color
                        predictionValue.style.transition = 'color 0.5s';
                        predictionValue.style.color = '#4CAF50';
                        setTimeout(() => {
                            predictionValue.style.color = '';
                        }, 1500);
                    } else if (previousPrediction === null) {
                        // First prediction
                        const successMessage = document.getElementById('success-message');
                        successMessage.textContent = 'Prediction calculated!';
                        successMessage.style.display = 'block';
                        
                        // Hide success message after animation completes
                        setTimeout(() => {
                            successMessage.style.display = 'none';
                        }, 3000);
                    }
                    
                    // Store current prediction for future comparison
                    previousPrediction = data.prediction;
                    
                    document.getElementById('error-message').style.display = 'none';
                    resultElement.style.display = 'block';
                }
            })
            .catch(error => {
                // Hide loading indicator
                loadingElement.style.display = 'none';
                predictButton.disabled = false;
                
                document.getElementById('error-message').textContent = 'An error occurred. Please try again.';
                document.getElementById('error-message').style.display = 'block';
                resultElement.style.display = 'none';
            });
        });
    </script>
</body>
</html>
